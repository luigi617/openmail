<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Email Management</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <!-- header removed on purpose -->

  <main class="layout">
    <!-- LEFT: filters + mailbox + legend -->
    <aside class="sidebar">
      <!-- 1) Filters -->
      <section class="card">
        <h2>Search</h2>
        <div class="search-row">
          <input
            type="text"
            id="search-input"
            class="search-input"
            placeholder="Search mail"
          />
          <button
            type="button"
            id="search-btn"
            class="search-btn"
            aria-label="Search"
          >
            <img
              src="/static/svg/search.svg"
              alt=""
              aria-hidden="true"
              class="icon-img"
            />
          </button>
        </div>
      </section>


      <!-- 2) Mailboxes (info + list) -->
      <section class="card">
        <h2>Mailboxes</h2>
        <div id="mailbox-list" class="mailbox-list">
          <!-- Filled by JS from /api/emails/mailbox -->
        </div>
      </section>

      <!-- 3) Legend (of logged emails) -->
      <section class="card legend-box">
        <div class="legend-header">
          <h2>Legend</h2>
        </div>
        <div id="legend-list" class="legend-list">
          <!-- Filled by JS with accounts + colors -->
        </div>
      </section>
    </aside>

    <!-- MIDDLE: email overview (paged, scrollable) -->
    <section class="middle">
      <section class="card list-header">
        <div class="list-header-top">
          <h2>Emails</h2>
          <div class="list-header-right">
            <button id="compose-btn" type="button" class="secondary">Compose</button>
            <div class="page-controls">
              <button id="prev-page-btn" type="button" class="secondary">&lt;</button>
              <span id="page-info">Page 1 / 1</span>
              <button id="next-page-btn" type="button" class="secondary">&gt;</button>
            </div>
          </div>
        </div>
      </section>

      <section class="card list-container">
        <div id="email-list" class="email-list">
          <!-- Email preview cards inserted by JS -->
        </div>
        <div id="list-empty" class="empty-state hidden">
          No emails match the current filters.
        </div>
      </section>
    </section>

    <!-- RIGHT: full email detail -->
    <section class="detail">
      <section class="card detail-card">
        <!-- No "Details" header to save vertical space -->

        <div id="detail-placeholder">
          <p class="placeholder-text">
            Select an email from the middle column to see its full content here.
          </p>
        </div>

        <div id="email-detail" class="email-detail hidden">
          <!-- Action toolbar -->
          <div class="detail-toolbar">
            <button
              type="button"
              class="icon-btn"
              id="btn-archive"
              title="Archive"
              aria-label="Archive"
            >
              <img
                src="/static/svg/box-archive.svg"
                alt=""
                aria-hidden="true"
                class="icon-img"
              />
            </button>

            <button
              type="button"
              class="icon-btn"
              id="btn-delete"
              title="Delete"
              aria-label="Delete"
            >
              <img
                src="/static/svg/delete.svg"
                alt=""
                aria-hidden="true"
                class="icon-img"
              />
            </button>

            <span class="toolbar-separator"></span>

            <button
              type="button"
              class="icon-btn"
              id="btn-reply"
              title="Reply"
              aria-label="Reply"
            >
              <img
                src="/static/svg/reply.svg"
                alt=""
                aria-hidden="true"
                class="icon-img"
              />
            </button>

            <button
              type="button"
              class="icon-btn"
              id="btn-reply-all"
              title="Reply all"
              aria-label="Reply all"
            >
              <img
                src="/static/svg/reply-all.svg"
                alt=""
                aria-hidden="true"
                class="icon-img"
              />
            </button>

            <button
              type="button"
              class="icon-btn"
              id="btn-forward"
              title="Forward"
              aria-label="Forward"
            >
              <img
                src="/static/svg/forward.svg"
                alt=""
                aria-hidden="true"
                class="icon-img"
              />
            </button>

            <span class="toolbar-spacer"></span>

            <button
              type="button"
              class="icon-btn"
              id="btn-move"
              title="Move"
              aria-label="Move"
            >
              <img
                src="/static/svg/folder.svg"
                alt=""
                aria-hidden="true"
                class="icon-img"
              />
            </button>
          </div>


          <!-- Move panel (toggles on Move) -->
          <div id="move-panel" class="move-panel hidden">
            <label>
              Move to:
              <select id="move-mailbox-select"></select>
            </label>
            <button type="button" class="secondary small" id="move-confirm">Move</button>
            <button type="button" class="secondary small" id="move-cancel">Cancel</button>
          </div>

          <!-- Single detail header (no duplicate) -->
          <div class="detail-header">
            <span class="detail-badge" id="detail-color-badge"></span>
            <div class="detail-meta">
              <div id="detail-subject" class="detail-subject"></div>
              <div id="detail-from" class="detail-line"></div>
              <div id="detail-to" class="detail-line"></div>
              <div id="detail-account" class="detail-line small"></div>
              <div id="detail-datetime" class="detail-line small"></div>
            </div>
          </div>
          <hr />

          <!-- HTML and plain text bodies -->
          <div id="detail-body-html" class="detail-body html hidden"></div>
          <pre id="detail-body-text" class="detail-body text hidden"></pre>
        </div>
      </section>
    </section>
  </main>

    <!-- Floating composer (bottom-right) -->

    <!-- Floating composer (bottom-right) -->
  <div id="composer" class="composer hidden">
    <!-- invisible resize hotspot in the top-left corner -->
    <div id="composer-resize-zone" class="composer-resize-zone"></div>

    <div class="composer-header">
      <div class="composer-header-left">
        <!-- attachment + emoji + format -->
        <button
          type="button"
          id="composer-attach"
          class="composer-icon-btn"
          title="Add attachment"
        >
          <img
              src="/static/svg/attachment.svg"
              alt=""
              aria-hidden="true"
              class="icon-img"
            />
        </button>
        <input
          type="file"
          id="composer-attachment-input"
          class="composer-file-input"
          multiple
        />

        <button
          type="button"
          id="composer-emoji"
          class="composer-icon-btn"
          title="Add emoji"
        >
          <img
              src="/static/svg/emoji.svg"
              alt=""
              aria-hidden="true"
              class="icon-img"
            />
        </button>

        <button
          type="button"
          id="composer-format"
          class="composer-icon-btn"
          title="Format text"
        >
          Aa
        </button>

        <!-- used by JS to set title, not visible -->
        <span id="composer-title" class="composer-title-hidden"></span>
      </div>

      <div class="composer-header-right">
        <!-- popup to choose extra fields (Cc/Bcc/Reply-To/Priority) -->
        <button
          type="button"
          id="composer-extra-toggle"
          class="composer-icon-btn composer-icon-btn--secondary"
          title="Show fields"
        >
          <img
              src="/static/svg/list.svg"
              alt=""
              aria-hidden="true"
              class="icon-img"
            />
        </button>

        <div id="composer-extra-menu" class="composer-extra-menu hidden">
          <label class="composer-extra-item">
            <input type="checkbox" data-field="cc" />
            Cc
          </label>
          <label class="composer-extra-item">
            <input type="checkbox" data-field="bcc" />
            Bcc
          </label>
          <label class="composer-extra-item">
            <input type="checkbox" data-field="replyto" />
            Reply-To
          </label>
          <label class="composer-extra-item">
            <input type="checkbox" data-field="priority" />
            Priority
          </label>
        </div>


        <!-- simple web-style close -->
        <button
          type="button"
          id="composer-close"
          class="composer-header-link"
          title="Close"
          aria-label="Close"
        >
          <img
            src="/static/svg/close.svg"
            alt=""
            aria-hidden="true"
            class="icon-img"
          />
        </button>
      </div>
    </div>

    <div class="composer-main">
      <div class="composer-meta">
        <label class="composer-row">
          <span class="composer-label">To:</span>
          <input
            type="text"
            id="composer-to"
            placeholder="Recipients (comma or semicolon separated)"
          />
        </label>

        <label
          class="composer-row composer-row-extra hidden"
          data-field="cc"
        >
          <span class="composer-label">Cc:</span>
          <input
            type="text"
            id="composer-cc"
            placeholder="Cc"
          />
        </label>

        <label
          class="composer-row composer-row-extra hidden"
          data-field="bcc"
        >
          <span class="composer-label">Bcc:</span>
          <input
            type="text"
            id="composer-bcc"
            placeholder="Bcc"
          />
        </label>

        <label class="composer-row">
          <span class="composer-label">Subject:</span>
          <input
            type="text"
            id="composer-subject"
            placeholder="Subject"
          />
        </label>

        <label
          class="composer-row composer-row-extra hidden"
          data-field="replyto"
        >
          <span class="composer-label">Reply-To:</span>
          <input
            type="text"
            id="composer-replyto"
            placeholder="Reply-To"
          />
        </label>

        <label
          class="composer-row composer-row-extra hidden"
          data-field="priority"
        >
          <span class="composer-label">Priority:</span>
          <select id="composer-priority">
            <option value="">Default</option>
            <option value="high">High</option>
            <option value="low">Low</option>
          </select>
        </label>
      </div>

      <div class="composer-editor">
        <textarea id="composer-body" placeholder=""></textarea>
      </div>
    </div>

    <!-- attachments shown between message and footer -->
    <div id="composer-attachments" class="composer-attachments hidden">
      <!-- pills added by JS -->
    </div>

    <div class="composer-footer">
      <button type="button" id="composer-send" class="primary">Send</button>

      <div class="send-later-wrapper">
        <!-- not a second send button, just a popup selector -->
        <button
          type="button"
          id="composer-send-later-toggle"
          class="secondary"
        >
          Send later ▾
        </button>

        <div
          id="composer-send-later-menu"
          class="composer-send-later-menu hidden"
        >
          <button type="button" data-delay="10m">In 10 minutes</button>
          <button type="button" data-delay="1h">In 1 hour</button>
          <button type="button" data-delay="tomorrow_morning">
            Tomorrow morning
          </button>
          <button type="button" data-delay="custom">
            Pick date &amp; time…
          </button>
        </div>
      </div>
    </div>
  </div>



  <script src="/static/utils.js"></script>
  <script src="/static/api.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
